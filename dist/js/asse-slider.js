(function() {
  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    slice = [].slice;

  (function($, window) {
    var Slider;
    Slider = (function() {
      Slider.prototype.iScroll = null;

      Slider.prototype.numberOfSlides = null;

      Slider.prototype.currentSlide = 0;

      Slider.prototype.interval = null;

      Slider.prototype.$slider = null;

      Slider.prototype.$slideContainer = null;

      Slider.prototype.$slides = null;

      Slider.prototype.defaults = {
        autoscroll: false,
        speed: 500,
        interval: 5000,
        debug: false,
        navigation: true,
        navigationTemplate: _.template('<ul class="sliderNavigation"> <% _.each(slides, function(element,index){ %> <li data-index="<%= index %>" class="slider_navigationItem"></li> <% }); %> </ul>'),
        navigationElement: false,
        prevNextButtons: true,
        prevNextButtonsTemplate: _.template('<span class="prev fa fa-chevron-left"></span> <span class="next fa fa-chevron-right"></span>'),
        slideContainerSelector: '.slideContainer',
        slideSelector: 'ul.slides > li'
      };

      Slider.prototype.debugTemplate = _.template('<div class="debug"> <span>Slider: <%= slider_index %></span> <span># of slides: <%= number_of_slides %></span> <span>Current slide: <%= current_slide %></span> <span>Autoscroll: <%= autoscroll %></span> <span># of navigations: <%= number_of_navigations %></span> </div>');

      function Slider(el, options, index) {
        if (index == null) {
          index = null;
        }
        this.debug = bind(this.debug, this);
        this.stopAutoScroll = bind(this.stopAutoScroll, this);
        this.startAutoScroll = bind(this.startAutoScroll, this);
        this.goToSlide = bind(this.goToSlide, this);
        this.prevSlide = bind(this.prevSlide, this);
        this.nextSlide = bind(this.nextSlide, this);
        this.resize = bind(this.resize, this);
        this.onScrollEnd = bind(this.onScrollEnd, this);
        this.options = $.extend({}, this.defaults, options);
        this.$slider = $(el);
        this.$slider.data('index', index);
        this.$slider.addClass('slider_' + index);
        this.$sliderNavigation = [];
        this.$slideContainer = this.$slider.find(this.options.slideContainerSelector);
        this.$slides = this.$slideContainer.find(this.options.slideSelector);
        this.numberOfSlides = this.$slides.length;
        this.enableSlides();
        this.resize();
        this.iScroll = new IScroll(el, {
          scrollX: true,
          scrollY: false,
          snap: true,
          snapSpeed: 400,
          tap: true,
          momentum: false,
          eventPassthrough: false
        });
        if (this.options.autoscroll) {
          this.startAutoScroll();
        }
        if (this.options.prevNextButtons) {
          this.addPrevNextButtons();
        }
        if (this.options.navigation) {
          this.addNavigation();
        }
        this.goToSlide(this.currentSlide);
        this.bindEvents();
        this.debug();
      }

      Slider.prototype.enableSlides = function() {
        return this.$slides.css({
          display: 'block'
        });
      };

      Slider.prototype.addPrevNextButtons = function() {
        return this.$slider.append(this.options.prevNextButtonsTemplate());
      };

      Slider.prototype.addNavigation = function() {
        var navigationItems, newElement, self, sliderNavigationLength;
        self = this;
        sliderNavigationLength = this.$sliderNavigation.length;
        if (this.options.navigationElement) {
          this.$sliderNavigation.push(this.options.navigationElement);
          navigationItems = this.$sliderNavigation[sliderNavigationLength].children();
          this.$slides.each(function(index, element) {
            var item;
            item = navigationItems.eq(index);
            if (item) {
              item.data('slider_index', self.$slider.data('index'));
              item.data('item_index', index);
              item.addClass('slider_navigationItem');
              return item.click(function(event) {
                self.stopAutoScroll();
                return self.goToSlide($(this).data('item_index'));
              });
            }
          });
        } else {
          newElement = this.options.navigationTemplate({
            'slides': this.$slides
          });
          this.$sliderNavigation.push($(newElement));
          this.$slider.append(this.$sliderNavigation[sliderNavigationLength]);
          this.$sliderNavigation[sliderNavigationLength].css({
            'margin-left': -this.$sliderNavigation[sliderNavigationLength].width() / 2
          });
        }
        return this.updateNavigation();
      };

      Slider.prototype.updateNavigation = function() {
        var index;
        index = this.currentSlide;
        return _.each(this.$sliderNavigation, function(element) {
          return $(element).find('.slider_navigationItem').removeClass('active').eq(index).addClass('active');
        });
      };

      Slider.prototype.onScrollEnd = function() {
        return this.debug();
      };

      Slider.prototype.resize = function() {
        this.stopAutoScroll();
        this.$slides.width(this.$slider.width());
        this.$slideContainer.width(this.$slider.width() * this.numberOfSlides);
        this.$slideContainer.height(this.$slider.height());
        this.$slider.height(this.$slides.first().height());
        if (this.iScroll) {
          this.iScroll.refresh();
        }
        return this.startAutoScroll();
      };

      Slider.prototype.bindEvents = function() {
        var self;
        self = this;
        this.iScroll.on('scrollEnd', this.onScrollEnd);
        this.$slides.on('click', 'img', function() {
          return self.stopAutoScroll();
        });
        this.$slider.on('click', 'span.next', function() {
          self.stopAutoScroll();
          return self.nextSlide();
        });
        this.$slider.on('click', 'span.prev', function() {
          self.stopAutoScroll();
          return self.prevSlide();
        });
        this.$slider.on('click', 'ul.sliderNavigation li', function() {
          self.stopAutoScroll();
          return self.goToSlide($(this).data('index'));
        });
        return $(window).bind('resizeEnd', function() {
          return setTimeout(function() {
            return self.resize();
          }, 0);
        });
      };

      Slider.prototype.nextSlide = function() {
        var nextSlideIndex, self;
        self = this;
        if (this.numberOfSlides > this.currentSlide + 1) {
          nextSlideIndex = this.currentSlide + 1;
        } else {
          nextSlideIndex = 0;
        }
        return this.goToSlide(nextSlideIndex);
      };

      Slider.prototype.prevSlide = function() {
        var nextSlideIndex, self;
        self = this;
        if (this.currentSlide - 1 >= 0) {
          nextSlideIndex = this.currentSlide - 1;
        } else {
          nextSlideIndex = this.numberOfSlides - 1;
        }
        return this.goToSlide(nextSlideIndex);
      };

      Slider.prototype.goToSlide = function(index) {
        var ref;
        if (this.currentSlide !== index) {
          if ((ref = this.iScroll) != null) {
            ref.goToPage(index, 0, this.options.speed);
          }
          this.currentSlide = index;
        }
        return this.updateNavigation();
      };

      Slider.prototype.startAutoScroll = function() {
        return this.interval = setInterval(this.nextSlide, this.options.interval);
      };

      Slider.prototype.stopAutoScroll = function() {
        clearInterval(this.interval);
        return this.interval = null;
      };

      Slider.prototype.debug = function() {
        if (this.options.debug) {
          this.$slider.find('.debug').remove();
          return this.$slider.append(this.debugTemplate({
            'slider_index': this.$slider.data('index'),
            'number_of_slides': this.numberOfSlides,
            'current_slide': this.iScroll.currentPage.pageX,
            'autoscroll': this.interval ? 'enabled' : 'disabled',
            'number_of_navigations': this.$sliderNavigation.length
          }));
        }
      };

      Slider.prototype.get = function(option) {
        console.log('option: ' + option + ' is ' + this.options[option]);
        return this.options[option];
      };

      Slider.prototype.set = function(option, value) {
        console.log('setting ' + option + ' to ' + value);
        this.options[option] = value;
        return this.updateSettings();
      };

      Slider.prototype.updateSettings = function() {
        if (this.options.autoscroll && !this.interval) {
          this.startAutoScroll();
        }
        if (this.options.navigationElement) {
          this.addNavigation();
        }
        return this.debug();
      };

      return Slider;

    })();
    return $.fn.extend({
      Slider: function() {
        var args, option;
        option = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
        return this.each(function(index) {
          var $this, data;
          $this = $(this);
          data = $this.data('Slider');
          if (!data) {
            $this.data('Slider', (data = new Slider(this, option, index)));
          }
          if (typeof option === 'string') {
            return data[option].apply(data, args);
          }
        });
      }
    });
  })(window.jQuery, window);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2Utc2xpZGVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQTtBQUFBLE1BQUE7b0JBQUE7O0FBQUEsRUFBQSxDQUFDLFNBQUMsQ0FBRCxFQUFJLE1BQUosR0FBQTtBQUdDLFFBQUEsTUFBQTtBQUFBLElBQU07QUFFSix1QkFBQSxPQUFBLEdBQVMsSUFBVCxDQUFBOztBQUFBLHVCQUNBLGNBQUEsR0FBZ0IsSUFEaEIsQ0FBQTs7QUFBQSx1QkFFQSxZQUFBLEdBQWMsQ0FGZCxDQUFBOztBQUFBLHVCQUdBLFFBQUEsR0FBVSxJQUhWLENBQUE7O0FBQUEsdUJBS0EsT0FBQSxHQUFTLElBTFQsQ0FBQTs7QUFBQSx1QkFNQSxlQUFBLEdBQWlCLElBTmpCLENBQUE7O0FBQUEsdUJBT0EsT0FBQSxHQUFTLElBUFQsQ0FBQTs7QUFBQSx1QkFTQSxRQUFBLEdBQ0U7QUFBQSxRQUFBLFVBQUEsRUFBWSxLQUFaO0FBQUEsUUFDQSxLQUFBLEVBQU8sR0FEUDtBQUFBLFFBRUEsUUFBQSxFQUFVLElBRlY7QUFBQSxRQUdBLEtBQUEsRUFBTyxLQUhQO0FBQUEsUUFLQSxVQUFBLEVBQVksSUFMWjtBQUFBLFFBTUEsa0JBQUEsRUFBb0IsQ0FBQyxDQUFDLFFBQUYsQ0FBVywrSkFBWCxDQU5wQjtBQUFBLFFBY0EsaUJBQUEsRUFBbUIsS0FkbkI7QUFBQSxRQWdCQSxlQUFBLEVBQWlCLElBaEJqQjtBQUFBLFFBaUJBLHVCQUFBLEVBQXlCLENBQUMsQ0FBQyxRQUFGLENBQVcsOEZBQVgsQ0FqQnpCO0FBQUEsUUFxQkEsc0JBQUEsRUFBd0IsaUJBckJ4QjtBQUFBLFFBc0JBLGFBQUEsRUFBZSxnQkF0QmY7T0FWRixDQUFBOztBQUFBLHVCQWtDQSxhQUFBLEdBQWUsQ0FBQyxDQUFDLFFBQUYsQ0FBVywrUUFBWCxDQWxDZixDQUFBOztBQTZDYSxNQUFBLGdCQUFDLEVBQUQsRUFBSyxPQUFMLEVBQWMsS0FBZCxHQUFBOztVQUFjLFFBQVE7U0FFakM7QUFBQSwyQ0FB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c2Utc2xpZGVyLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiI1xuIyBTbGlkZXIgalF1ZXJ5IHBsdWdpblxuIyBBdXRob3I6IFRob21hcyBLbG9rb3NjaCA8bWFpbEB0aG9tYXNrbG9rb3NjaC5jb20+XG4jXG4oKCQsIHdpbmRvdykgLT5cblxuICAjIERlZmluZSB0aGUgcGx1Z2luIGNsYXNzXG4gIGNsYXNzIFNsaWRlclxuXG4gICAgaVNjcm9sbDogbnVsbFxuICAgIG51bWJlck9mU2xpZGVzOiBudWxsXG4gICAgY3VycmVudFNsaWRlOiAwXG4gICAgaW50ZXJ2YWw6IG51bGxcblxuICAgICRzbGlkZXI6IG51bGxcbiAgICAkc2xpZGVDb250YWluZXI6IG51bGxcbiAgICAkc2xpZGVzOiBudWxsXG5cbiAgICBkZWZhdWx0czpcbiAgICAgIGF1dG9zY3JvbGw6IGZhbHNlXG4gICAgICBzcGVlZDogNTAwXG4gICAgICBpbnRlcnZhbDogNTAwMFxuICAgICAgZGVidWc6IGZhbHNlXG5cbiAgICAgIG5hdmlnYXRpb246IHRydWVcbiAgICAgIG5hdmlnYXRpb25UZW1wbGF0ZTogXy50ZW1wbGF0ZSgnPHVsIGNsYXNzPVwic2xpZGVyTmF2aWdhdGlvblwiPlxuICAgICAgICA8JSBfLmVhY2goc2xpZGVzLCBmdW5jdGlvbihlbGVtZW50LGluZGV4KXsgJT5cbiAgICAgICAgICA8bGkgZGF0YS1pbmRleD1cIjwlPSBpbmRleCAlPlwiIGNsYXNzPVwic2xpZGVyX25hdmlnYXRpb25JdGVtXCI+PC9saT5cbiAgICAgICAgPCUgfSk7ICU+XG4gICAgICA8L3VsPicpXG5cbiAgICAgICMgSWYgc3BlY2lmaWVkLCB0aGlzIGVsZW1lbnRzIGNoaWxkcmVuIHdpbGwgcmVjZWl2ZSBpbmRleCB2YWx1ZXMgZm9yXG4gICAgICAjIHRoZSBzbGlkZXMgYW5kIG1hdGNoaW5nIGNsaWNrIGV2ZW50IGJpbmRpbmdzXG4gICAgICBuYXZpZ2F0aW9uRWxlbWVudDogZmFsc2VcblxuICAgICAgcHJldk5leHRCdXR0b25zOiB0cnVlXG4gICAgICBwcmV2TmV4dEJ1dHRvbnNUZW1wbGF0ZTogXy50ZW1wbGF0ZSgnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByZXYgZmEgZmEtY2hldnJvbi1sZWZ0XCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJuZXh0IGZhIGZhLWNoZXZyb24tcmlnaHRcIj48L3NwYW4+JylcblxuICAgICAgc2xpZGVDb250YWluZXJTZWxlY3RvcjogJy5zbGlkZUNvbnRhaW5lcidcbiAgICAgIHNsaWRlU2VsZWN0b3I6ICd1bC5zbGlkZXMgPiBsaSdcblxuICAgIGRlYnVnVGVtcGxhdGU6IF8udGVtcGxhdGUoJ1xuICAgICAgPGRpdiBjbGFzcz1cImRlYnVnXCI+XG4gICAgICAgIDxzcGFuPlNsaWRlcjogPCU9IHNsaWRlcl9pbmRleCAlPjwvc3Bhbj5cbiAgICAgICAgPHNwYW4+IyBvZiBzbGlkZXM6IDwlPSBudW1iZXJfb2Zfc2xpZGVzICU+PC9zcGFuPlxuICAgICAgICA8c3Bhbj5DdXJyZW50IHNsaWRlOiA8JT0gY3VycmVudF9zbGlkZSAlPjwvc3Bhbj5cbiAgICAgICAgPHNwYW4+QXV0b3Njcm9sbDogPCU9IGF1dG9zY3JvbGwgJT48L3NwYW4+XG4gICAgICAgIDxzcGFuPiMgb2YgbmF2aWdhdGlvbnM6IDwlPSBudW1iZXJfb2ZfbmF2aWdhdGlvbnMgJT48L3NwYW4+XG4gICAgICA8L2Rpdj4nKVxuXG5cbiAgICAjIENvbnN0cnVjdG9yXG4gICAgY29uc3RydWN0b3I6IChlbCwgb3B0aW9ucywgaW5kZXggPSBudWxsKSAtPlxuXG4gICAgICBAb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBAZGVmYXVsdHMsIG9wdGlvbnMpXG5cbiAgICAgIEAkc2xpZGVyID0gJChlbClcbiAgICAgIEAkc2xpZGVyLmRhdGEgJ2luZGV4JywgaW5kZXhcbiAgICAgIEAkc2xpZGVyLmFkZENsYXNzICdzbGlkZXJfJytpbmRleFxuICAgICAgQCRzbGlkZXJOYXZpZ2F0aW9uID0gW11cblxuICAgICAgQCRzbGlkZUNvbnRhaW5lciA9IEAkc2xpZGVyLmZpbmQgQG9wdGlvbnMuc2xpZGVDb250YWluZXJTZWxlY3RvclxuICAgICAgQCRzbGlkZXMgPSBAJHNsaWRlQ29udGFpbmVyLmZpbmQgQG9wdGlvbnMuc2xpZGVTZWxlY3RvclxuICAgICAgQG51bWJlck9mU2xpZGVzID0gQCRzbGlkZXMubGVuZ3RoXG5cbiAgICAgICMgRW5hYmxlIHNsaWRlcyB0cm91Z2ggQ1NTXG4gICAgICBAZW5hYmxlU2xpZGVzKClcblxuICAgICAgQHJlc2l6ZSgpXG5cbiAgICAgIEBpU2Nyb2xsID0gbmV3IElTY3JvbGwgZWwsXG4gICAgICAgIHNjcm9sbFg6IHRydWVcbiAgICAgICAgc2Nyb2xsWTogZmFsc2VcbiAgICAgICAgc25hcDogdHJ1ZVxuICAgICAgICBzbmFwU3BlZWQ6IDQwMFxuICAgICAgICB0YXA6IHRydWVcbiAgICAgICAgbW9tZW50dW06IGZhbHNlXG4gICAgICAgIGV2ZW50UGFzc3Rocm91Z2g6IGZhbHNlXG5cbiAgICAgIGlmIEBvcHRpb25zLmF1dG9zY3JvbGxcbiAgICAgICAgQHN0YXJ0QXV0b1Njcm9sbCgpXG5cbiAgICAgIGlmIEBvcHRpb25zLnByZXZOZXh0QnV0dG9uc1xuICAgICAgICBAYWRkUHJldk5leHRCdXR0b25zKClcblxuICAgICAgaWYgQG9wdGlvbnMubmF2aWdhdGlvblxuICAgICAgICBAYWRkTmF2aWdhdGlvbigpXG5cbiAgICAgIEBnb1RvU2xpZGUgQGN1cnJlbnRTbGlkZVxuICAgICAgQGJpbmRFdmVudHMoKVxuICAgICAgQGRlYnVnKClcblxuXG4gICAgIyBFbmFibGUgc2xpZGVzIHZpYSBDU1NcbiAgICBlbmFibGVTbGlkZXM6IC0+XG5cbiAgICAgIEAkc2xpZGVzLmNzc1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snXG5cblxuICAgICMgQWRkIHByZXYgbmV4dCBidXR0b25zXG4gICAgYWRkUHJldk5leHRCdXR0b25zOiAtPlxuXG4gICAgICBAJHNsaWRlci5hcHBlbmQgQG9wdGlvbnMucHJldk5leHRCdXR0b25zVGVtcGxhdGUoKVxuXG5cbiAgICAjIEFkZCBuYXZpZ2F0aW9uXG4gICAgYWRkTmF2aWdhdGlvbjogLT5cblxuICAgICAgc2VsZiA9IEBcblxuICAgICAgc2xpZGVyTmF2aWdhdGlvbkxlbmd0aCA9IEAkc2xpZGVyTmF2aWdhdGlvbi5sZW5ndGhcblxuICAgICAgaWYgQG9wdGlvbnMubmF2aWdhdGlvbkVsZW1lbnRcblxuICAgICAgICBAJHNsaWRlck5hdmlnYXRpb24ucHVzaCBAb3B0aW9ucy5uYXZpZ2F0aW9uRWxlbWVudFxuICAgICAgICBuYXZpZ2F0aW9uSXRlbXMgPSBAJHNsaWRlck5hdmlnYXRpb25bc2xpZGVyTmF2aWdhdGlvbkxlbmd0aF0uY2hpbGRyZW4oKVxuXG4gICAgICAgIEAkc2xpZGVzLmVhY2ggKGluZGV4LGVsZW1lbnQpLT5cbiAgICAgICAgICBpdGVtID0gbmF2aWdhdGlvbkl0ZW1zLmVxKGluZGV4KVxuICAgICAgICAgIGlmIGl0ZW1cbiAgICAgICAgICAgIGl0ZW0uZGF0YSAnc2xpZGVyX2luZGV4Jywgc2VsZi4kc2xpZGVyLmRhdGEgJ2luZGV4J1xuICAgICAgICAgICAgaXRlbS5kYXRhICdpdGVtX2luZGV4JywgaW5kZXhcbiAgICAgICAgICAgIGl0ZW0uYWRkQ2xhc3MgJ3NsaWRlcl9uYXZpZ2F0aW9uSXRlbSdcbiAgICAgICAgICAgIGl0ZW0uY2xpY2sgKGV2ZW50KS0+XG4gICAgICAgICAgICAgIHNlbGYuc3RvcEF1dG9TY3JvbGwoKVxuICAgICAgICAgICAgICBzZWxmLmdvVG9TbGlkZSAkKEApLmRhdGEoJ2l0ZW1faW5kZXgnKVxuXG4gICAgICBlbHNlXG5cbiAgICAgICAgIyBDcmVhdGUgYSBqUXVlcnkgb2JqZWN0IGRpcmVjdGx5IGZyb20gc2xpZGVyIGNvZGVcbiAgICAgICAgbmV3RWxlbWVudCA9IEBvcHRpb25zLm5hdmlnYXRpb25UZW1wbGF0ZSh7J3NsaWRlcyc6IEAkc2xpZGVzfSlcbiAgICAgICAgQCRzbGlkZXJOYXZpZ2F0aW9uLnB1c2ggJChuZXdFbGVtZW50KVxuXG4gICAgICAgICMgQXBwZW5kIGl0IHRvIHNsaWRlciBlbGVtZW50XG4gICAgICAgIEAkc2xpZGVyLmFwcGVuZCBAJHNsaWRlck5hdmlnYXRpb25bc2xpZGVyTmF2aWdhdGlvbkxlbmd0aF1cblxuICAgICAgICAjIFJlc2l6ZSBuYXZpZ2F0aW9uXG4gICAgICAgIEAkc2xpZGVyTmF2aWdhdGlvbltzbGlkZXJOYXZpZ2F0aW9uTGVuZ3RoXS5jc3NcbiAgICAgICAgICAnbWFyZ2luLWxlZnQnOiAtQCRzbGlkZXJOYXZpZ2F0aW9uW3NsaWRlck5hdmlnYXRpb25MZW5ndGhdLndpZHRoKCkgLyAyXG5cbiAgICAgIEB1cGRhdGVOYXZpZ2F0aW9uKClcblxuXG4gICAgIyBVcGRhdGUgbmF2aWdhdGlvbiBzdGF0dXNcbiAgICB1cGRhdGVOYXZpZ2F0aW9uOiAtPlxuXG4gICAgICBpbmRleCA9IEBjdXJyZW50U2xpZGVcblxuICAgICAgXy5lYWNoIEAkc2xpZGVyTmF2aWdhdGlvbiwgKGVsZW1lbnQpLT5cbiAgICAgICAgJChlbGVtZW50KS5maW5kKCcuc2xpZGVyX25hdmlnYXRpb25JdGVtJylcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAgICAgLmVxKGluZGV4KS5hZGRDbGFzcyAnYWN0aXZlJ1xuXG5cbiAgICAjIEV2ZW50IGNhbGxiYWNrIG9uIHNjcm9sbCBlbmRcbiAgICBvblNjcm9sbEVuZDogPT5cblxuICAgICAgQGRlYnVnKClcblxuXG4gICAgIyBSZXNpemUgc2xpZGVyXG4gICAgcmVzaXplOiA9PlxuXG4gICAgICBAc3RvcEF1dG9TY3JvbGwoKVxuXG4gICAgICBAJHNsaWRlcy53aWR0aCBAJHNsaWRlci53aWR0aCgpXG4gICAgICBAJHNsaWRlQ29udGFpbmVyLndpZHRoIEAkc2xpZGVyLndpZHRoKCkgKiBAbnVtYmVyT2ZTbGlkZXNcbiAgICAgIEAkc2xpZGVDb250YWluZXIuaGVpZ2h0IEAkc2xpZGVyLmhlaWdodCgpXG5cbiAgICAgIEAkc2xpZGVyLmhlaWdodCBAJHNsaWRlcy5maXJzdCgpLmhlaWdodCgpXG5cbiAgICAgIGlmIEBpU2Nyb2xsIHRoZW4gQGlTY3JvbGwucmVmcmVzaCgpXG5cbiAgICAgIEBzdGFydEF1dG9TY3JvbGwoKVxuXG5cbiAgICAjIEJpbmQgZXZlbnRzXG4gICAgYmluZEV2ZW50czogLT5cblxuICAgICAgc2VsZiA9IEBcblxuICAgICAgQGlTY3JvbGwub24gJ3Njcm9sbEVuZCcsIEBvblNjcm9sbEVuZFxuXG4gICAgICBAJHNsaWRlcy5vbiAnY2xpY2snLCAnaW1nJywgLT5cbiAgICAgICAgc2VsZi5zdG9wQXV0b1Njcm9sbCgpXG5cbiAgICAgIEAkc2xpZGVyLm9uICdjbGljaycsICdzcGFuLm5leHQnLCAtPlxuICAgICAgICBzZWxmLnN0b3BBdXRvU2Nyb2xsKClcbiAgICAgICAgc2VsZi5uZXh0U2xpZGUoKVxuXG4gICAgICBAJHNsaWRlci5vbiAnY2xpY2snLCAnc3Bhbi5wcmV2JywgLT5cbiAgICAgICAgc2VsZi5zdG9wQXV0b1Njcm9sbCgpXG4gICAgICAgIHNlbGYucHJldlNsaWRlKClcblxuICAgICAgQCRzbGlkZXIub24gJ2NsaWNrJywgJ3VsLnNsaWRlck5hdmlnYXRpb24gbGknLCAtPlxuICAgICAgICBzZWxmLnN0b3BBdXRvU2Nyb2xsKClcbiAgICAgICAgc2VsZi5nb1RvU2xpZGUgJChAKS5kYXRhKCdpbmRleCcpXG5cbiAgICAgICQod2luZG93KS5iaW5kICdyZXNpemVFbmQnLCAtPlxuICAgICAgICBzZXRUaW1lb3V0IC0+XG4gICAgICAgICAgc2VsZi5yZXNpemUoKVxuICAgICAgICAsIDBcblxuXG4gICAgIyBHbyB0byBuZXh0IHNsaWRlXG4gICAgbmV4dFNsaWRlOiA9PlxuXG4gICAgICBzZWxmID0gQFxuXG4gICAgICBpZiBAbnVtYmVyT2ZTbGlkZXMgPiBAY3VycmVudFNsaWRlICsgMVxuICAgICAgICBuZXh0U2xpZGVJbmRleCA9IEBjdXJyZW50U2xpZGUrMVxuICAgICAgZWxzZVxuICAgICAgICBuZXh0U2xpZGVJbmRleCA9IDBcblxuICAgICAgQGdvVG9TbGlkZSBuZXh0U2xpZGVJbmRleFxuXG5cbiAgICAjIEdvIHRvIHByZXZpb3VzIHNsaWRlXG4gICAgcHJldlNsaWRlOiA9PlxuXG4gICAgICBzZWxmID0gQFxuXG4gICAgICBpZiBAY3VycmVudFNsaWRlLTEgPj0gMFxuICAgICAgICBuZXh0U2xpZGVJbmRleCA9IEBjdXJyZW50U2xpZGUtMVxuICAgICAgZWxzZVxuICAgICAgICBuZXh0U2xpZGVJbmRleCA9IEBudW1iZXJPZlNsaWRlcy0xXG5cbiAgICAgIEBnb1RvU2xpZGUgbmV4dFNsaWRlSW5kZXhcblxuXG4gICAgIyBHbyB0byBzbGlkZSBpbmRleFxuICAgIGdvVG9TbGlkZTogKGluZGV4KT0+XG5cbiAgICAgIGlmIEBjdXJyZW50U2xpZGUgIT0gaW5kZXhcbiAgICAgICAgQGlTY3JvbGw/LmdvVG9QYWdlIGluZGV4LCAwLCBAb3B0aW9ucy5zcGVlZFxuICAgICAgICBAY3VycmVudFNsaWRlID0gaW5kZXhcblxuICAgICAgQHVwZGF0ZU5hdmlnYXRpb24oKVxuXG5cbiAgICAjIFN0YXJ0IGF1dG9zY3JvbGxcbiAgICBzdGFydEF1dG9TY3JvbGw6ID0+XG5cbiAgICAgIEBpbnRlcnZhbCA9IHNldEludGVydmFsIEBuZXh0U2xpZGUsIEBvcHRpb25zLmludGVydmFsXG5cblxuICAgICMgU3RvcCBhdXRvc2Nyb2xsXG4gICAgc3RvcEF1dG9TY3JvbGw6ID0+XG5cbiAgICAgIGNsZWFySW50ZXJ2YWwgQGludGVydmFsXG4gICAgICBAaW50ZXJ2YWwgPSBudWxsXG5cblxuICAgICMgQWRkIGRlYnVnIG91dHB1dCB0byBzbGlkZXJcbiAgICBkZWJ1ZzogPT5cblxuICAgICAgaWYgQG9wdGlvbnMuZGVidWdcbiAgICAgICAgQCRzbGlkZXIuZmluZCgnLmRlYnVnJykucmVtb3ZlKClcbiAgICAgICAgQCRzbGlkZXIuYXBwZW5kIEBkZWJ1Z1RlbXBsYXRlXG4gICAgICAgICAgJ3NsaWRlcl9pbmRleCc6IEAkc2xpZGVyLmRhdGEgJ2luZGV4J1xuICAgICAgICAgICdudW1iZXJfb2Zfc2xpZGVzJzogQG51bWJlck9mU2xpZGVzXG4gICAgICAgICAgJ2N1cnJlbnRfc2xpZGUnOiBAaVNjcm9sbC5jdXJyZW50UGFnZS5wYWdlWFxuICAgICAgICAgICdhdXRvc2Nyb2xsJzogaWYgQGludGVydmFsIHRoZW4gJ2VuYWJsZWQnIGVsc2UgJ2Rpc2FibGVkJ1xuICAgICAgICAgICdudW1iZXJfb2ZfbmF2aWdhdGlvbnMnOiBAJHNsaWRlck5hdmlnYXRpb24ubGVuZ3RoXG5cblxuICAgICMgUHJpbnQgb3B0aW9uIHRvIGNvbnNvbGVcbiAgICAjIENhbid0IGp1c3QgcmV0dXJuIHRoZSB2YWx1ZSB0byBkZWJ1ZyBpdCBiZWNhdXNlXG4gICAgIyBpdCB3b3VsZCBicmVhayBjaGFpbmluZyB3aXRoIHRoZSBqUXVlcnkgb2JqZWN0XG4gICAgIyBFdmVyeSBtZXRob2QgY2FsbCByZXR1cm5zIGEgalF1ZXJ5IG9iamVjdFxuICAgIGdldDogKG9wdGlvbikgLT5cbiAgICAgIGNvbnNvbGUubG9nICdvcHRpb246ICcrb3B0aW9uKycgaXMgJytAb3B0aW9uc1tvcHRpb25dXG4gICAgICBAb3B0aW9uc1tvcHRpb25dXG5cblxuICAgICMgU2V0IG9wdGlvbiB0byB0aGlzIGluc3RhbmNlcyBvcHRpb25zIGFycmF5XG4gICAgc2V0OiAob3B0aW9uLCB2YWx1ZSkgLT5cbiAgICAgIGNvbnNvbGUubG9nICdzZXR0aW5nICcrb3B0aW9uKycgdG8gJyt2YWx1ZVxuICAgICAgQG9wdGlvbnNbb3B0aW9uXSA9IHZhbHVlXG4gICAgICBAdXBkYXRlU2V0dGluZ3MoKVxuXG5cbiAgICAjIFVwZGF0ZSBzbGlkZXIgc2V0dGluZ3MgZnJvbSBvcHRpb25zXG4gICAgdXBkYXRlU2V0dGluZ3M6IC0+XG5cbiAgICAgIGlmIEBvcHRpb25zLmF1dG9zY3JvbGwgJiYgIUBpbnRlcnZhbFxuICAgICAgICBAc3RhcnRBdXRvU2Nyb2xsKClcblxuICAgICAgaWYgQG9wdGlvbnMubmF2aWdhdGlvbkVsZW1lbnRcbiAgICAgICAgQGFkZE5hdmlnYXRpb24oKVxuXG4gICAgICBAZGVidWcoKVxuXG5cblxuICAjIERlZmluZSB0aGUgcGx1Z2luXG4gICQuZm4uZXh0ZW5kIFNsaWRlcjogKG9wdGlvbiwgYXJncy4uLikgLT5cblxuICAgIEBlYWNoIChpbmRleCktPlxuICAgICAgJHRoaXMgPSAkKEApXG4gICAgICBkYXRhID0gJHRoaXMuZGF0YSgnU2xpZGVyJylcblxuICAgICAgaWYgIWRhdGFcbiAgICAgICAgJHRoaXMuZGF0YSAnU2xpZGVyJywgKGRhdGEgPSBuZXcgU2xpZGVyKEAsIG9wdGlvbiwgaW5kZXgpKVxuXG4gICAgICBpZiB0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnXG4gICAgICAgIHJldHVybiBkYXRhW29wdGlvbl0uYXBwbHkoZGF0YSwgYXJncylcblxuXG4pIHdpbmRvdy5qUXVlcnksIHdpbmRvd1xuXG4iXX0=