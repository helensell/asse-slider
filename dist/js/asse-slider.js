(function() {
  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    slice = [].slice;

  (function($, window) {
    var Slider;
    Slider = (function() {
      Slider.prototype.iScroll = null;

      Slider.prototype.numberOfSlides = null;

      Slider.prototype.currentSlide = 0;

      Slider.prototype.interval = null;

      Slider.prototype.$slider = null;

      Slider.prototype.$slideContainer = null;

      Slider.prototype.$slides = null;

      Slider.prototype.defaults = {
        autoscroll: false,
        speed: 500,
        interval: 5000,
        debug: true,
        snap: true,
        navigation: true,
        navigationTemplate: _.template('<ul class="sliderNavigation"> <% _.each(slides, function(element,index){ %> <li data-index="<%= index %>" class="slider_navigationItem fa fa-circle-o"></li> <% }); %> </ul>'),
        navigationElement: false,
        prevNextButtons: true,
        prevNextButtonsTemplate: _.template('<span class="prev fa fa-angle-left"></span> <span class="next fa fa-angle-right"></span>'),
        slideContainerSelector: '.slideContainer',
        slideSelector: 'ul.slides > li',
        inactiveSlideOpacity: null,
        slideMargin: 0,
        slideWidth: 'auto'
      };

      Slider.prototype.debugTemplate = _.template('<div class="debug"> <span>Slider: <%= slider_index %></span> <span># of slides: <%= number_of_slides %></span> <span>Current slide: <%= current_slide %></span> <span>Autoscroll: <%= autoscroll %></span> <span># of navigations: <%= number_of_navigations %></span> <span>Slider width: <%= slider_width %></span> </div>');

      function Slider(el, options, index) {
        if (index == null) {
          index = null;
        }
        this.debug = bind(this.debug, this);
        this.stopAutoScroll = bind(this.stopAutoScroll, this);
        this.startAutoScroll = bind(this.startAutoScroll, this);
        this.goToSlide = bind(this.goToSlide, this);
        this.prevSlide = bind(this.prevSlide, this);
        this.nextSlide = bind(this.nextSlide, this);
        this.resize = bind(this.resize, this);
        this.onBeforeScrollStart = bind(this.onBeforeScrollStart, this);
        this.onScrollEnd = bind(this.onScrollEnd, this);
        this.options = $.extend({}, this.defaults, options);
        this.$slider = $(el);
        this.$slider.data('index', index);
        this.$slider.addClass('slider_' + index);
        this.$sliderNavigation = [];
        this.$slideContainer = this.$slider.find(this.options.slideContainerSelector);
        this.$slides = this.$slideContainer.find(this.options.slideSelector);
        this.numberOfSlides = this.$slides.length;
        this.enableSlides();
        this.iScroll = new IScroll(el, {
          scrollX: true,
          scrollY: false,
          snap: this.options.snap,
          snapSpeed: 400,
          tap: true,
          momentum: false,
          eventPassthrough: false
        });
        if (this.options.autoscroll) {
          this.startAutoScroll();
        }
        if (this.options.prevNextButtons) {
          this.addPrevNextButtons();
        }
        if (this.options.navigation) {
          this.addNavigation();
        }
        this.resize();
        this.goToSlide(this.currentSlide);
        this.bindEvents();
        this.debug();
      }

      Slider.prototype.enableSlides = function() {
        return this.$slides.css({
          display: 'block'
        });
      };

      Slider.prototype.addPrevNextButtons = function() {
        return this.$slider.append(this.options.prevNextButtonsTemplate());
      };

      Slider.prototype.addNavigation = function() {
        var navigationItems, newElement, self, sliderNavigationLength;
        self = this;
        sliderNavigationLength = this.$sliderNavigation.length;
        if (this.options.navigationElement) {
          this.$sliderNavigation.push(this.options.navigationElement);
          navigationItems = this.$sliderNavigation[sliderNavigationLength].children();
          this.$slides.each(function(index, element) {
            var item;
            item = navigationItems.eq(index);
            if (item) {
              item.data('slider_index', self.$slider.data('index'));
              item.data('item_index', index);
              item.addClass('slider_navigationItem');
              return item.click(function(event) {
                self.stopAutoScroll();
                return self.goToSlide($(this).data('item_index'));
              });
            }
          });
        } else {
          newElement = this.options.navigationTemplate({
            'slides': this.$slides
          });
          this.$sliderNavigation.push($(newElement));
          this.$slider.append(this.$sliderNavigation[sliderNavigationLength]);
          this.$sliderNavigation[sliderNavigationLength].css({
            'margin-left': -this.$sliderNavigation[sliderNavigationLength].width() / 2
          });
        }
        return this.updateNavigation();
      };

      Slider.prototype.updateNavigation = function() {
        var index;
        index = this.currentSlide;
        return _.each(this.$sliderNavigation, function(element) {
          return $(element).find('.slider_navigationItem').removeClass('active').eq(index).addClass('active');
        });
      };

      Slider.prototype.updateSlides = function() {
        if (this.options.inactiveSlideOpacity) {
          this.$slides.stop().animate({
            opacity: this.options.inactiveSlideOpacity
          });
          return this.$slides.eq(this.currentSlide).stop().animate({
            opacity: '1'
          });
        }
      };

      Slider.prototype.onScrollEnd = function() {
        this.currentSlide = this.iScroll.currentPage.pageX;
        this.updateSlides();
        this.updateNavigation();
        return this.debug();
      };

      Slider.prototype.onBeforeScrollStart = function() {
        return this.stopAutoScroll();
      };

      Slider.prototype.resize = function() {
        this.stopAutoScroll();
        if (this.options.slideWidth === 'auto') {
          this.$slides.width(this.$slider.outerWidth());
        } else {
          this.$slides.width(parseInt(this.options.slideWidth) + 'px');
        }
        this.$slideContainer.width((this.$slides.outerWidth(true) + (this.options.slideMargin * 2)) * this.numberOfSlides);
        this.$slideContainer.height(this.$slider.height());
        if (this.iScroll) {
          this.iScroll.refresh();
        }
        return this.startAutoScroll();
      };

      Slider.prototype.bindEvents = function() {
        var self;
        self = this;
        this.iScroll.on('scrollEnd', this.onScrollEnd);
        this.iScroll.on('beforeScrollStart', this.onBeforeScrollStart);
        this.$slides.on('click', 'img', function() {
          return self.stopAutoScroll();
        });
        this.$slider.on('click', 'span.next', function() {
          self.stopAutoScroll();
          return self.nextSlide();
        });
        this.$slider.on('click', 'span.prev', function() {
          self.stopAutoScroll();
          return self.prevSlide();
        });
        this.$slider.on('click', 'ul.sliderNavigation li', function() {
          self.stopAutoScroll();
          return self.goToSlide($(this).data('index'));
        });
        return $(window).bind('resize', function() {
          return self.resize();

          /*
          if @resizeTo
            clearTimeout @resizeTimeout
          @resizeTimeout = setTimeout ->
          , 200
           */
        });
      };

      Slider.prototype.nextSlide = function() {
        var nextSlideIndex, self;
        self = this;
        if (this.numberOfSlides > this.currentSlide + 1) {
          nextSlideIndex = this.currentSlide + 1;
        } else {
          nextSlideIndex = 0;
        }
        return this.goToSlide(nextSlideIndex);
      };

      Slider.prototype.prevSlide = function() {
        var nextSlideIndex, self;
        self = this;
        if (this.currentSlide - 1 >= 0) {
          nextSlideIndex = this.currentSlide - 1;
        } else {
          nextSlideIndex = this.numberOfSlides - 1;
        }
        return this.goToSlide(nextSlideIndex);
      };

      Slider.prototype.goToSlide = function(index) {
        var ref;
        if (this.currentSlide !== index) {
          if ((ref = this.iScroll) != null) {
            ref.goToPage(index, 0, this.options.speed);
          }
          this.currentSlide = index;
        }
        this.updateSlides();
        return this.updateNavigation();
      };

      Slider.prototype.startAutoScroll = function() {
        return this.interval = setInterval(this.nextSlide, this.options.interval);
      };

      Slider.prototype.stopAutoScroll = function() {
        clearInterval(this.interval);
        return this.interval = null;
      };

      Slider.prototype.debug = function() {
        if (this.options.debug) {
          this.$slider.find('.debug').remove();
          return this.$slider.append(this.debugTemplate({
            'slider_index': this.$slider.data('index'),
            'number_of_slides': this.numberOfSlides,
            'current_slide': this.iScroll.currentPage.pageX,
            'autoscroll': this.interval ? 'enabled' : 'disabled',
            'number_of_navigations': this.$sliderNavigation.length,
            'slider_width': this.$slider.width()
          }));
        }
      };

      Slider.prototype.get = function(option) {
        console.log('option: ' + option + ' is ' + this.options[option]);
        return this.options[option];
      };

      Slider.prototype.set = function(option, value) {
        console.log('setting ' + option + ' to ' + value);
        this.options[option] = value;
        return this.updateSettings();
      };

      Slider.prototype.updateSettings = function() {
        if (this.options.autoscroll && !this.interval) {
          this.startAutoScroll();
        }
        if (this.options.navigationElement) {
          this.addNavigation();
        }
        return this.debug();
      };

      return Slider;

    })();
    return $.fn.extend({
      Slider: function() {
        var args, option;
        option = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
        return this.each(function(index) {
          var $this, data;
          $this = $(this);
          data = $this.data('Slider');
          if (!data) {
            $this.data('Slider', (data = new Slider(this, option, index)));
          }
          if (typeof option === 'string') {
            return data[option].apply(data, args);
          }
        });
      }
    });
  })(window.jQuery, window);

}).call(this);

//# sourceMappingURL=data:application/json;base64,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TixFQUZrQjtNQUFBLENBQVI7S0FBWixFQXBWRDtFQUFBLENBQUQsQ0FBQSxDQWlXRSxNQUFNLENBQUMsTUFqV1QsRUFpV2lCLE1BaldqQixDQUFBLENBQUE7QUFBQSIsImZpbGUiOiJhc3NlLXNsaWRlci5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIiNcbiMgU2xpZGVyIGpRdWVyeSBwbHVnaW5cbiMgQXV0aG9yOiBUaG9tYXMgS2xva29zY2ggPG1haWxAdGhvbWFza2xva29zY2guY29tPlxuI1xuKCgkLCB3aW5kb3cpIC0+XG5cbiAgIyBEZWZpbmUgdGhlIHBsdWdpbiBjbGFzc1xuICBjbGFzcyBTbGlkZXJcblxuICAgIGlTY3JvbGw6IG51bGxcbiAgICBudW1iZXJPZlNsaWRlczogbnVsbFxuICAgIGN1cnJlbnRTbGlkZTogMFxuICAgIGludGVydmFsOiBudWxsXG5cbiAgICAkc2xpZGVyOiBudWxsXG4gICAgJHNsaWRlQ29udGFpbmVyOiBudWxsXG4gICAgJHNsaWRlczogbnVsbFxuXG4gICAgZGVmYXVsdHM6XG4gICAgICBhdXRvc2Nyb2xsOiBmYWxzZVxuICAgICAgc3BlZWQ6IDUwMFxuICAgICAgaW50ZXJ2YWw6IDUwMDBcbiAgICAgIGRlYnVnOiB0cnVlXG4gICAgICBzbmFwOiB0cnVlXG5cbiAgICAgIG5hdmlnYXRpb246IHRydWVcbiAgICAgIG5hdmlnYXRpb25UZW1wbGF0ZTogXy50ZW1wbGF0ZSgnPHVsIGNsYXNzPVwic2xpZGVyTmF2aWdhdGlvblwiPlxuICAgICAgICA8JSBfLmVhY2goc2xpZGVzLCBmdW5jdGlvbihlbGVtZW50LGluZGV4KXsgJT5cbiAgICAgICAgICA8bGkgZGF0YS1pbmRleD1cIjwlPSBpbmRleCAlPlwiIGNsYXNzPVwic2xpZGVyX25hdmlnYXRpb25JdGVtIGZhIGZhLWNpcmNsZS1vXCI+PC9saT5cbiAgICAgICAgPCUgfSk7ICU+XG4gICAgICA8L3VsPicpXG5cbiAgICAgICMgSWYgc3BlY2lmaWVkLCB0aGlzIGVsZW1lbnRzIGNoaWxkcmVuIHdpbGwgcmVjZWl2ZSBpbmRleCB2YWx1ZXMgZm9yXG4gICAgICAjIHRoZSBzbGlkZXMgYW5kIG1hdGNoaW5nIGNsaWNrIGV2ZW50IGJpbmRpbmdzXG4gICAgICBuYXZpZ2F0aW9uRWxlbWVudDogZmFsc2VcblxuICAgICAgcHJldk5leHRCdXR0b25zOiB0cnVlXG4gICAgICBwcmV2TmV4dEJ1dHRvbnNUZW1wbGF0ZTogXy50ZW1wbGF0ZSgnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByZXYgZmEgZmEtYW5nbGUtbGVmdFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibmV4dCBmYSBmYS1hbmdsZS1yaWdodFwiPjwvc3Bhbj4nKVxuXG4gICAgICBzbGlkZUNvbnRhaW5lclNlbGVjdG9yOiAnLnNsaWRlQ29udGFpbmVyJ1xuICAgICAgc2xpZGVTZWxlY3RvcjogJ3VsLnNsaWRlcyA+IGxpJ1xuXG4gICAgICAjIE9wYWNpdHkgb2Ygc2xpZGVzIG90aGVyIHRoYW4gdGhlIGN1cnJlbnRcbiAgICAgICMgT25seSBhcHBsaWNhYmxlIGlmIHRoZSBzbGlkZXIgZWxlbWVudCBoYXMgb3ZlcmZsb3c6IHZpc2libGVcbiAgICAgICMgYW5kIGluYWN0aXZlIHNsaWRlcyBhcmUgc2hvd24gbmV4dCB0byB0aGUgY3VycmVudFxuICAgICAgaW5hY3RpdmVTbGlkZU9wYWNpdHk6IG51bGxcblxuICAgICAgIyBNYXJnaW4gbGVmdCBhbmQgcmlnaHQgb2YgdGhlIHNsaWRlcyBpbiBwaXhlbHNcbiAgICAgIHNsaWRlTWFyZ2luOiAwXG5cbiAgICAgICMgV2lkdGggb2YgdGhlIHNsaWRlLCBkZWZhdWx0cyB0byBhdXRvLCB0YWtlcyBhIDEwMCUgc2xpZGVyIHdpZHRoXG4gICAgICBzbGlkZVdpZHRoOiAnYXV0bydcblxuXG4gICAgZGVidWdUZW1wbGF0ZTogXy50ZW1wbGF0ZSgnXG4gICAgICA8ZGl2IGNsYXNzPVwiZGVidWdcIj5cbiAgICAgICAgPHNwYW4+U2xpZGVyOiA8JT0gc2xpZGVyX2luZGV4ICU+PC9zcGFuPlxuICAgICAgICA8c3Bhbj4jIG9mIHNsaWRlczogPCU9IG51bWJlcl9vZl9zbGlkZXMgJT48L3NwYW4+XG4gICAgICAgIDxzcGFuPkN1cnJlbnQgc2xpZGU6IDwlPSBjdXJyZW50X3NsaWRlICU+PC9zcGFuPlxuICAgICAgICA8c3Bhbj5BdXRvc2Nyb2xsOiA8JT0gYXV0b3Njcm9sbCAlPjwvc3Bhbj5cbiAgICAgICAgPHNwYW4+IyBvZiBuYXZpZ2F0aW9uczogPCU9IG51bWJlcl9vZl9uYXZpZ2F0aW9ucyAlPjwvc3Bhbj5cbiAgICAgICAgPHNwYW4+U2xpZGVyIHdpZHRoOiA8JT0gc2xpZGVyX3dpZHRoICU+PC9zcGFuPlxuICAgICAgPC9kaXY+JylcblxuXG4gICAgIyBDb25zdHJ1Y3RvclxuICAgIGNvbnN0cnVjdG9yOiAoZWwsIG9wdGlvbnMsIGluZGV4ID0gbnVsbCkgLT5cblxuICAgICAgQG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQGRlZmF1bHRzLCBvcHRpb25zKVxuXG4gICAgICBAJHNsaWRlciA9ICQoZWwpXG4gICAgICBAJHNsaWRlci5kYXRhICdpbmRleCcsIGluZGV4XG4gICAgICBAJHNsaWRlci5hZGRDbGFzcyAnc2xpZGVyXycraW5kZXhcbiAgICAgIEAkc2xpZGVyTmF2aWdhdGlvbiA9IFtdXG5cbiAgICAgIEAkc2xpZGVDb250YWluZXIgPSBAJHNsaWRlci5maW5kIEBvcHRpb25zLnNsaWRlQ29udGFpbmVyU2VsZWN0b3JcbiAgICAgIEAkc2xpZGVzID0gQCRzbGlkZUNvbnRhaW5lci5maW5kIEBvcHRpb25zLnNsaWRlU2VsZWN0b3JcbiAgICAgIEBudW1iZXJPZlNsaWRlcyA9IEAkc2xpZGVzLmxlbmd0aFxuXG4gICAgICAjIEVuYWJsZSBzbGlkZXMgdHJvdWdoIENTU1xuICAgICAgQGVuYWJsZVNsaWRlcygpXG5cbiAgICAgIEBpU2Nyb2xsID0gbmV3IElTY3JvbGwgZWwsXG4gICAgICAgIHNjcm9sbFg6IHRydWVcbiAgICAgICAgc2Nyb2xsWTogZmFsc2VcbiAgICAgICAgc25hcDogQG9wdGlvbnMuc25hcFxuICAgICAgICBzbmFwU3BlZWQ6IDQwMFxuICAgICAgICB0YXA6IHRydWVcbiAgICAgICAgbW9tZW50dW06IGZhbHNlXG4gICAgICAgIGV2ZW50UGFzc3Rocm91Z2g6IGZhbHNlXG5cbiAgICAgIGlmIEBvcHRpb25zLmF1dG9zY3JvbGxcbiAgICAgICAgQHN0YXJ0QXV0b1Njcm9sbCgpXG5cbiAgICAgIGlmIEBvcHRpb25zLnByZXZOZXh0QnV0dG9uc1xuICAgICAgICBAYWRkUHJldk5leHRCdXR0b25zKClcblxuICAgICAgaWYgQG9wdGlvbnMubmF2aWdhdGlvblxuICAgICAgICBAYWRkTmF2aWdhdGlvbigpXG5cbiAgICAgIEByZXNpemUoKVxuICAgICAgQGdvVG9TbGlkZSBAY3VycmVudFNsaWRlXG4gICAgICBAYmluZEV2ZW50cygpXG4gICAgICBAZGVidWcoKVxuXG5cbiAgICAjIEVuYWJsZSBzbGlkZXMgdmlhIENTU1xuICAgIGVuYWJsZVNsaWRlczogLT5cblxuICAgICAgQCRzbGlkZXMuY3NzXG4gICAgICAgIGRpc3BsYXk6ICdibG9jaydcblxuXG4gICAgIyBBZGQgcHJldiBuZXh0IGJ1dHRvbnNcbiAgICBhZGRQcmV2TmV4dEJ1dHRvbnM6IC0+XG5cbiAgICAgIEAkc2xpZGVyLmFwcGVuZCBAb3B0aW9ucy5wcmV2TmV4dEJ1dHRvbnNUZW1wbGF0ZSgpXG5cblxuICAgICMgQWRkIG5hdmlnYXRpb25cbiAgICBhZGROYXZpZ2F0aW9uOiAtPlxuXG4gICAgICBzZWxmID0gQFxuXG4gICAgICBzbGlkZXJOYXZpZ2F0aW9uTGVuZ3RoID0gQCRzbGlkZXJOYXZpZ2F0aW9uLmxlbmd0aFxuXG4gICAgICBpZiBAb3B0aW9ucy5uYXZpZ2F0aW9uRWxlbWVudFxuXG4gICAgICAgIEAkc2xpZGVyTmF2aWdhdGlvbi5wdXNoIEBvcHRpb25zLm5hdmlnYXRpb25FbGVtZW50XG4gICAgICAgIG5hdmlnYXRpb25JdGVtcyA9IEAkc2xpZGVyTmF2aWdhdGlvbltzbGlkZXJOYXZpZ2F0aW9uTGVuZ3RoXS5jaGlsZHJlbigpXG5cbiAgICAgICAgQCRzbGlkZXMuZWFjaCAoaW5kZXgsZWxlbWVudCktPlxuICAgICAgICAgIGl0ZW0gPSBuYXZpZ2F0aW9uSXRlbXMuZXEoaW5kZXgpXG4gICAgICAgICAgaWYgaXRlbVxuICAgICAgICAgICAgaXRlbS5kYXRhICdzbGlkZXJfaW5kZXgnLCBzZWxmLiRzbGlkZXIuZGF0YSAnaW5kZXgnXG4gICAgICAgICAgICBpdGVtLmRhdGEgJ2l0ZW1faW5kZXgnLCBpbmRleFxuICAgICAgICAgICAgaXRlbS5hZGRDbGFzcyAnc2xpZGVyX25hdmlnYXRpb25JdGVtJ1xuICAgICAgICAgICAgaXRlbS5jbGljayAoZXZlbnQpLT5cbiAgICAgICAgICAgICAgc2VsZi5zdG9wQXV0b1Njcm9sbCgpXG4gICAgICAgICAgICAgIHNlbGYuZ29Ub1NsaWRlICQoQCkuZGF0YSgnaXRlbV9pbmRleCcpXG5cbiAgICAgIGVsc2VcblxuICAgICAgICAjIENyZWF0ZSBhIGpRdWVyeSBvYmplY3QgZGlyZWN0bHkgZnJvbSBzbGlkZXIgY29kZVxuICAgICAgICBuZXdFbGVtZW50ID0gQG9wdGlvbnMubmF2aWdhdGlvblRlbXBsYXRlKHsnc2xpZGVzJzogQCRzbGlkZXN9KVxuICAgICAgICBAJHNsaWRlck5hdmlnYXRpb24ucHVzaCAkKG5ld0VsZW1lbnQpXG5cbiAgICAgICAgIyBBcHBlbmQgaXQgdG8gc2xpZGVyIGVsZW1lbnRcbiAgICAgICAgQCRzbGlkZXIuYXBwZW5kIEAkc2xpZGVyTmF2aWdhdGlvbltzbGlkZXJOYXZpZ2F0aW9uTGVuZ3RoXVxuXG4gICAgICAgICMgUmVzaXplIG5hdmlnYXRpb25cbiAgICAgICAgQCRzbGlkZXJOYXZpZ2F0aW9uW3NsaWRlck5hdmlnYXRpb25MZW5ndGhdLmNzc1xuICAgICAgICAgICdtYXJnaW4tbGVmdCc6IC1AJHNsaWRlck5hdmlnYXRpb25bc2xpZGVyTmF2aWdhdGlvbkxlbmd0aF0ud2lkdGgoKSAvIDJcblxuICAgICAgQHVwZGF0ZU5hdmlnYXRpb24oKVxuXG5cbiAgICAjIFVwZGF0ZSBuYXZpZ2F0aW9uIHN0YXR1c1xuICAgIHVwZGF0ZU5hdmlnYXRpb246IC0+XG5cbiAgICAgIGluZGV4ID0gQGN1cnJlbnRTbGlkZVxuXG4gICAgICBfLmVhY2ggQCRzbGlkZXJOYXZpZ2F0aW9uLCAoZWxlbWVudCktPlxuICAgICAgICAkKGVsZW1lbnQpLmZpbmQoJy5zbGlkZXJfbmF2aWdhdGlvbkl0ZW0nKVxuICAgICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgICAgICAuZXEoaW5kZXgpLmFkZENsYXNzICdhY3RpdmUnXG5cblxuICAgIHVwZGF0ZVNsaWRlczogLT5cblxuICAgICAgIyBGYWRlIGluYWN0aXZlIHNsaWRlcyB0byBhIHNwZWNpZmljIG9wYWNpdHkgdmFsdWVcbiAgICAgIGlmIEBvcHRpb25zLmluYWN0aXZlU2xpZGVPcGFjaXR5XG5cbiAgICAgICAgQCRzbGlkZXMuc3RvcCgpLmFuaW1hdGVcbiAgICAgICAgICBvcGFjaXR5OiBAb3B0aW9ucy5pbmFjdGl2ZVNsaWRlT3BhY2l0eVxuXG4gICAgICAgIEAkc2xpZGVzLmVxKEBjdXJyZW50U2xpZGUpLnN0b3AoKS5hbmltYXRlXG4gICAgICAgICAgb3BhY2l0eTogJzEnXG5cblxuICAgICMgRXZlbnQgY2FsbGJhY2sgb24gc2Nyb2xsIGVuZFxuICAgIG9uU2Nyb2xsRW5kOiA9PlxuXG4gICAgICBAY3VycmVudFNsaWRlID0gQGlTY3JvbGwuY3VycmVudFBhZ2UucGFnZVhcbiAgICAgIEB1cGRhdGVTbGlkZXMoKVxuICAgICAgQHVwZGF0ZU5hdmlnYXRpb24oKVxuICAgICAgQGRlYnVnKClcblxuXG4gICAgIyBVc2VyIHRvdWNoZXMgdGhlIHNjcmVlbiBidXQgc2Nyb2xsaW5nIGRpZG4ndCBzdGFydCB5ZXRcbiAgICBvbkJlZm9yZVNjcm9sbFN0YXJ0OiA9PlxuXG4gICAgICBAc3RvcEF1dG9TY3JvbGwoKVxuXG5cbiAgICAjIFJlc2l6ZSBzbGlkZXJcbiAgICByZXNpemU6ID0+XG5cbiAgICAgIEBzdG9wQXV0b1Njcm9sbCgpXG5cbiAgICAgIGlmIEBvcHRpb25zLnNsaWRlV2lkdGggPT0gJ2F1dG8nXG4gICAgICAgIEAkc2xpZGVzLndpZHRoIEAkc2xpZGVyLm91dGVyV2lkdGgoKVxuICAgICAgZWxzZVxuICAgICAgICBAJHNsaWRlcy53aWR0aCBwYXJzZUludChAb3B0aW9ucy5zbGlkZVdpZHRoKSArICdweCdcblxuICAgICAgQCRzbGlkZUNvbnRhaW5lci53aWR0aCAoQCRzbGlkZXMub3V0ZXJXaWR0aCh0cnVlKSArIChAb3B0aW9ucy5zbGlkZU1hcmdpbioyKSkgKiBAbnVtYmVyT2ZTbGlkZXNcbiAgICAgIEAkc2xpZGVDb250YWluZXIuaGVpZ2h0IEAkc2xpZGVyLmhlaWdodCgpXG5cbiAgICAgIGlmIEBpU2Nyb2xsXG4gICAgICAgIEBpU2Nyb2xsLnJlZnJlc2goKVxuXG4gICAgICBAc3RhcnRBdXRvU2Nyb2xsKClcblxuXG4gICAgIyBCaW5kIGV2ZW50c1xuICAgIGJpbmRFdmVudHM6IC0+XG5cbiAgICAgIHNlbGYgPSBAXG5cbiAgICAgIEBpU2Nyb2xsLm9uICdzY3JvbGxFbmQnLCBAb25TY3JvbGxFbmRcblxuICAgICAgQGlTY3JvbGwub24gJ2JlZm9yZVNjcm9sbFN0YXJ0JywgQG9uQmVmb3JlU2Nyb2xsU3RhcnRcblxuICAgICAgQCRzbGlkZXMub24gJ2NsaWNrJywgJ2ltZycsIC0+XG4gICAgICAgIHNlbGYuc3RvcEF1dG9TY3JvbGwoKVxuXG4gICAgICBAJHNsaWRlci5vbiAnY2xpY2snLCAnc3Bhbi5uZXh0JywgLT5cbiAgICAgICAgc2VsZi5zdG9wQXV0b1Njcm9sbCgpXG4gICAgICAgIHNlbGYubmV4dFNsaWRlKClcblxuICAgICAgQCRzbGlkZXIub24gJ2NsaWNrJywgJ3NwYW4ucHJldicsIC0+XG4gICAgICAgIHNlbGYuc3RvcEF1dG9TY3JvbGwoKVxuICAgICAgICBzZWxmLnByZXZTbGlkZSgpXG5cbiAgICAgIEAkc2xpZGVyLm9uICdjbGljaycsICd1bC5zbGlkZXJOYXZpZ2F0aW9uIGxpJywgLT5cbiAgICAgICAgc2VsZi5zdG9wQXV0b1Njcm9sbCgpXG4gICAgICAgIHNlbGYuZ29Ub1NsaWRlICQoQCkuZGF0YSgnaW5kZXgnKVxuXG4gICAgICAkKHdpbmRvdykuYmluZCAncmVzaXplJywgLT5cbiAgICAgICAgc2VsZi5yZXNpemUoKVxuICAgICAgICAjIyNcbiAgICAgICAgaWYgQHJlc2l6ZVRvXG4gICAgICAgICAgY2xlYXJUaW1lb3V0IEByZXNpemVUaW1lb3V0XG4gICAgICAgIEByZXNpemVUaW1lb3V0ID0gc2V0VGltZW91dCAtPlxuICAgICAgICAsIDIwMFxuICAgICAgICAjIyNcblxuXG4gICAgIyBHbyB0byBuZXh0IHNsaWRlXG4gICAgbmV4dFNsaWRlOiA9PlxuXG4gICAgICBzZWxmID0gQFxuXG4gICAgICBpZiBAbnVtYmVyT2ZTbGlkZXMgPiBAY3VycmVudFNsaWRlICsgMVxuICAgICAgICBuZXh0U2xpZGVJbmRleCA9IEBjdXJyZW50U2xpZGUrMVxuICAgICAgZWxzZVxuICAgICAgICBuZXh0U2xpZGVJbmRleCA9IDBcblxuICAgICAgQGdvVG9TbGlkZSBuZXh0U2xpZGVJbmRleFxuXG5cbiAgICAjIEdvIHRvIHByZXZpb3VzIHNsaWRlXG4gICAgcHJldlNsaWRlOiA9PlxuXG4gICAgICBzZWxmID0gQFxuXG4gICAgICBpZiBAY3VycmVudFNsaWRlLTEgPj0gMFxuICAgICAgICBuZXh0U2xpZGVJbmRleCA9IEBjdXJyZW50U2xpZGUtMVxuICAgICAgZWxzZVxuICAgICAgICBuZXh0U2xpZGVJbmRleCA9IEBudW1iZXJPZlNsaWRlcy0xXG5cbiAgICAgIEBnb1RvU2xpZGUgbmV4dFNsaWRlSW5kZXhcblxuXG4gICAgIyBHbyB0byBzbGlkZSBpbmRleFxuICAgIGdvVG9TbGlkZTogKGluZGV4KT0+XG5cbiAgICAgIGlmIEBjdXJyZW50U2xpZGUgIT0gaW5kZXhcbiAgICAgICAgQGlTY3JvbGw/LmdvVG9QYWdlIGluZGV4LCAwLCBAb3B0aW9ucy5zcGVlZFxuICAgICAgICBAY3VycmVudFNsaWRlID0gaW5kZXhcblxuICAgICAgQHVwZGF0ZVNsaWRlcygpXG4gICAgICBAdXBkYXRlTmF2aWdhdGlvbigpXG5cblxuICAgICMgU3RhcnQgYXV0b3Njcm9sbFxuICAgIHN0YXJ0QXV0b1Njcm9sbDogPT5cblxuICAgICAgQGludGVydmFsID0gc2V0SW50ZXJ2YWwgQG5leHRTbGlkZSwgQG9wdGlvbnMuaW50ZXJ2YWxcblxuXG4gICAgIyBTdG9wIGF1dG9zY3JvbGxcbiAgICBzdG9wQXV0b1Njcm9sbDogPT5cblxuICAgICAgY2xlYXJJbnRlcnZhbCBAaW50ZXJ2YWxcbiAgICAgIEBpbnRlcnZhbCA9IG51bGxcblxuXG4gICAgIyBBZGQgZGVidWcgb3V0cHV0IHRvIHNsaWRlclxuICAgIGRlYnVnOiA9PlxuXG4gICAgICBpZiBAb3B0aW9ucy5kZWJ1Z1xuICAgICAgICBAJHNsaWRlci5maW5kKCcuZGVidWcnKS5yZW1vdmUoKVxuICAgICAgICBAJHNsaWRlci5hcHBlbmQgQGRlYnVnVGVtcGxhdGVcbiAgICAgICAgICAnc2xpZGVyX2luZGV4JzogQCRzbGlkZXIuZGF0YSAnaW5kZXgnXG4gICAgICAgICAgJ251bWJlcl9vZl9zbGlkZXMnOiBAbnVtYmVyT2ZTbGlkZXNcbiAgICAgICAgICAnY3VycmVudF9zbGlkZSc6IEBpU2Nyb2xsLmN1cnJlbnRQYWdlLnBhZ2VYXG4gICAgICAgICAgJ2F1dG9zY3JvbGwnOiBpZiBAaW50ZXJ2YWwgdGhlbiAnZW5hYmxlZCcgZWxzZSAnZGlzYWJsZWQnXG4gICAgICAgICAgJ251bWJlcl9vZl9uYXZpZ2F0aW9ucyc6IEAkc2xpZGVyTmF2aWdhdGlvbi5sZW5ndGhcbiAgICAgICAgICAnc2xpZGVyX3dpZHRoJzogQCRzbGlkZXIud2lkdGgoKVxuXG5cbiAgICAjIFByaW50IG9wdGlvbiB0byBjb25zb2xlXG4gICAgIyBDYW4ndCBqdXN0IHJldHVybiB0aGUgdmFsdWUgdG8gZGVidWcgaXQgYmVjYXVzZVxuICAgICMgaXQgd291bGQgYnJlYWsgY2hhaW5pbmcgd2l0aCB0aGUgalF1ZXJ5IG9iamVjdFxuICAgICMgRXZlcnkgbWV0aG9kIGNhbGwgcmV0dXJucyBhIGpRdWVyeSBvYmplY3RcbiAgICBnZXQ6IChvcHRpb24pIC0+XG4gICAgICBjb25zb2xlLmxvZyAnb3B0aW9uOiAnK29wdGlvbisnIGlzICcrQG9wdGlvbnNbb3B0aW9uXVxuICAgICAgQG9wdGlvbnNbb3B0aW9uXVxuXG5cbiAgICAjIFNldCBvcHRpb24gdG8gdGhpcyBpbnN0YW5jZXMgb3B0aW9ucyBhcnJheVxuICAgIHNldDogKG9wdGlvbiwgdmFsdWUpIC0+XG4gICAgICBjb25zb2xlLmxvZyAnc2V0dGluZyAnK29wdGlvbisnIHRvICcrdmFsdWVcbiAgICAgIEBvcHRpb25zW29wdGlvbl0gPSB2YWx1ZVxuICAgICAgQHVwZGF0ZVNldHRpbmdzKClcblxuXG4gICAgIyBVcGRhdGUgc2xpZGVyIHNldHRpbmdzIGZyb20gb3B0aW9uc1xuICAgIHVwZGF0ZVNldHRpbmdzOiAtPlxuXG4gICAgICBpZiBAb3B0aW9ucy5hdXRvc2Nyb2xsICYmICFAaW50ZXJ2YWxcbiAgICAgICAgQHN0YXJ0QXV0b1Njcm9sbCgpXG5cbiAgICAgIGlmIEBvcHRpb25zLm5hdmlnYXRpb25FbGVtZW50XG4gICAgICAgIEBhZGROYXZpZ2F0aW9uKClcblxuICAgICAgQGRlYnVnKClcblxuXG5cbiAgIyBEZWZpbmUgdGhlIHBsdWdpblxuICAkLmZuLmV4dGVuZCBTbGlkZXI6IChvcHRpb24sIGFyZ3MuLi4pIC0+XG5cbiAgICBAZWFjaCAoaW5kZXgpLT5cbiAgICAgICR0aGlzID0gJChAKVxuICAgICAgZGF0YSA9ICR0aGlzLmRhdGEoJ1NsaWRlcicpXG5cbiAgICAgIGlmICFkYXRhXG4gICAgICAgICR0aGlzLmRhdGEgJ1NsaWRlcicsIChkYXRhID0gbmV3IFNsaWRlcihALCBvcHRpb24sIGluZGV4KSlcblxuICAgICAgaWYgdHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJ1xuICAgICAgICByZXR1cm4gZGF0YVtvcHRpb25dLmFwcGx5KGRhdGEsIGFyZ3MpXG5cblxuKSB3aW5kb3cualF1ZXJ5LCB3aW5kb3dcblxuIl19