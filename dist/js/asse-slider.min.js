(function(){var t=function(t,i){return function(){return t.apply(i,arguments)}},i=[].slice;!function(e,s){var o;return o=function(){function i(i,s,o){var n;null==o&&(o=null),this.debug=t(this.debug,this),this.stopAutoScroll=t(this.stopAutoScroll,this),this.startAutoScroll=t(this.startAutoScroll,this),this.goToSlide=t(this.goToSlide,this),this.prevSlide=t(this.prevSlide,this),this.nextSlide=t(this.nextSlide,this),this.resize=t(this.resize,this),this.onBeforeScrollStart=t(this.onBeforeScrollStart,this),this.onScrollEnd=t(this.onScrollEnd,this),n=this,this.options=e.extend({},this.defaults,s),this.$slider=e(i),this.$slider.data("index",this.getSliderIndex(o)),this.$slider.addClass(this.getSliderIndex(o)),this.$sliderNavigation=[],this.$slidesInContainer=null,this.$slideContainer=this.$slider.find(this.options.slideContainerSelector),this.refreshSlides(),this.options.carousel&&(this.options.carousel>this.$slideContainer.find(this.options.slideSelector).length&&(this.options.carousel=this.$slideContainer.find(this.options.slideSelector).length),this.addCarouselSlides(),this.refreshSlides(),this.currentSlide=this.options.carousel),this.enableSlides(),this.iScroll=new IScroll(i,{scrollX:!0,scrollY:!1,snap:this.options.snap,snapSpeed:400,tap:!0,momentum:!1,eventPassthrough:!0,preventDefault:!1}),this.options.autoscroll&&this.startAutoScroll(),this.addPrevNextButtons(),_.size(this.options.navigation)&&this.renderNavigation(),this.resize(),this.goToSlide(this.currentSlide,!1),this.bindEvents(),this.debug(),"function"==typeof n.options.onStart&&n.options.onStart.apply(this,[])}return i.prototype.iScroll=null,i.prototype.numberOfSlides=null,i.prototype.currentSlide=0,i.prototype.interval=null,i.prototype.$slider=null,i.prototype.$slideContainer=null,i.prototype.$slides=null,i.prototype.$sliderNavigation=null,i.prototype.$sliderListeners=null,i.prototype.$slidesInContainer=null,i.prototype.defaults={autoscroll:!0,speed:500,interval:5e3,debug:!0,snap:!0,disabled:!1,navigation:["index"],indexNavigationTemplate:_.template('<ul class="sliderNavigation"> <% _.each(slides, function(element,index){ %> <% if(!carousel || (index>=carousel && (index+1)<=slides.length-carousel)){ %> <li data-item_index="<%= index %>" class="slider_navigationItem fa fa-circle-o"></li> <% } %> <% }); %> </ul>'),prevNextButtons:!0,prevNextButtonsTemplate:_.template('<span class="prev fa fa-angle-left"></span> <span class="next fa fa-angle-right"></span>'),prevButtonSelector:null,nextButtonSelector:null,slideContainerSelector:".slideContainer",slideSelector:"ul.slides > li",inactiveSlideOpacity:null,slideMargin:0,slideWidth:"auto",carousel:0,onStart:function(t){},onSlideClick:function(t){return this.goToSlide(e(t.currentTarget).index())},onNextClick:function(t){},onPrevClick:function(t){},onScrollEnd:function(t){},onBeforeResize:function(t){},onAfterResize:function(t){}},i.prototype.debugTemplate=_.template('<div class="debug"> <span>Slider: <%= slider_index %></span> <span># of slides: <%= number_of_slides %></span> <span>Current slide: <%= current_slide %></span> <span>Autoscroll: <%= autoscroll %></span> <span># of navigations: <%= number_of_navigations %></span> <span>Slider width: <%= slider_width %></span> </div>'),i.prototype.getSliderIndex=function(t){var i;return i=this.$slider.attr("id"),this.options.index?"slider_"+this.options.index:"undefined"!=typeof i&&i!==!1?"slider_"+i:"slider_"+t},i.prototype.refreshSlides=function(){return this.$slides=this.$slideContainer.find(this.options.slideSelector),this.numberOfSlides=this.$slides.length},i.prototype.enableSlides=function(){return this.$slides.css({display:"block"})},i.prototype.addPrevNextButtons=function(){var t,i,s;return s=this,t=function(t){return t.stopPropagation(),s.stopAutoScroll(),s.nextSlide(),"function"==typeof s.options.onNextClick?s.options.onNextClick.apply(this,[t,s]):void 0},i=function(t){return t.stopPropagation(),s.stopAutoScroll(),s.prevSlide(),"function"==typeof s.options.onPrevClick?s.options.onPrevClick.apply(this,[t,s]):void 0},this.options.prevButtonSelector&&e(this.options.prevButtonSelector+"[data-slider-prev="+s.$slider.data("index")+"]").on("click",i),this.options.nextButtonSelector&&e(this.options.nextButtonSelector+"[data-slider-next="+s.$slider.data("index")+"]").on("click",t),this.options.prevNextButtons?(this.$slider.append(this.options.prevNextButtonsTemplate()),this.$slider.on("tap","span.prev",i),this.$slider.on("tap","span.next",t)):void 0},i.prototype.renderNavigation=function(){var t;return t=this,_.each(this.$sliderNavigation,function(t,i){return t.data("Slider")?void 0:e(t).remove()}),_.each(this.options.navigation,function(i){return function(s,o,n){var l,r;return"index"===s?(r=i.options.indexNavigationTemplate({slides:i.$slides,carousel:i.options.carousel}),i.$sliderNavigation.push(e(r)),i.$slider.append(_.last(i.$sliderNavigation)),_.last(i.$sliderNavigation).css({"margin-left":-(_.last(i.$sliderNavigation).width()/2)})):s instanceof jQuery?(i.$sliderNavigation.push(s),l=_.last(i.$sliderNavigation).children(),i.$slides.each(function(s,o){var n;return n=l.eq(s),n?(n.data("slider_index",i.$slider.data("index")),n.data("item_index",s+parseInt(t.options.carousel)),n.addClass("slider_navigationItem"),n.on("click",function(i){return t.stopAutoScroll(),t.goToSlide(e(this).data("item_index"))})):void 0})):void 0}}(this)),this.updateNavigation()},i.prototype.updateNavigation=function(){var t,i;return i=this,t=this.currentSlide,this.options.disabled?void 0:_.each(this.$sliderNavigation,function(i){return i instanceof jQuery?e(i).find(".slider_navigationItem").removeClass("active").filter(function(){return e(this).data("item_index")===t}).addClass("active"):void 0})},i.prototype.updateSlides=function(t){return null==t&&(t=!0),this.options.inactiveSlideOpacity&&t?this.setSlideOpacity(1,this.options.inactiveSlideOpacity,!0):this.setSlideOpacity(1,this.options.inactiveSlideOpacity,!1),this.$slides.removeClass("active"),this.$slides.eq(this.currentSlide).addClass("active")},i.prototype.setSlideOpacity=function(t,i,e){return null==e&&(e=!0),e?(this.$slides.stop().animate({opacity:i}),this.$slides.eq(this.currentSlide).stop().animate({opacity:t})):(this.$slides.stop().css({opacity:i}),this.$slides.eq(this.currentSlide).stop().css({opacity:t}))},i.prototype.onScrollEnd=function(t){var i;return i=this,this.slidesInContainer>1?this.iScroll.currentPage.pageX<this.numberOfSlides-this.slidesInContainer&&(this.currentSlide=this.iScroll.currentPage.pageX):this.currentSlide=this.iScroll.currentPage.pageX,this.options.carousel&&(this.currentSlide>=this.numberOfSlides-this.options.carousel?this.goToSlide(this.options.carousel+(this.currentSlide-(this.numberOfSlides-this.options.carousel)),!1,!1):this.currentSlide<this.options.carousel&&this.goToSlide(this.numberOfSlides-(this.options.carousel+1),!1,!1)),"function"==typeof i.options.onScrollEnd&&i.options.onScrollEnd.apply(this,[t,i]),this.updateSlides(),this.updateNavigation(),this.debug()},i.prototype.onBeforeScrollStart=function(){return this.stopAutoScroll()},i.prototype.resize=function(t){var i,e;return this.stopAutoScroll(),this.$slides.width("auto"===this.options.slideWidth?this.$slider.outerWidth():parseInt(this.options.slideWidth)+"px"),e=this.$slides.outerWidth()+2*this.options.slideMargin,i=e*this.numberOfSlides,i-=2*this.options.slideMargin,i+=parseFloat(this.$slides.first().css("margin-left")),i+=parseFloat(this.$slides.last().css("margin-right")),this.slidesInContainer=Math.ceil(this.$slider.width()/e),this.$slideContainer.width(i),this.$slideContainer.height(this.$slider.height()),this.iScroll&&this.iScroll.refresh(),this.options.autoscroll&&this.startAutoScroll(),"function"==typeof this.options.onAfterResize?this.options.onAfterResize.apply(this,[t]):void 0},i.prototype.bindEvents=function(){var t;return t=this,this.iScroll.on("scrollEnd",this.onScrollEnd),this.iScroll.on("beforeScrollStart",this.onBeforeScrollStart),this.$slides.on("tap",function(i){return i.stopPropagation(),t.stopAutoScroll(),"function"==typeof t.options.onSlideClick?t.options.onSlideClick.apply(t,[i]):void 0}),this.$slider.on("tap","ul.sliderNavigation li",function(){return t.stopAutoScroll(),t.goToSlide(e(this).data("item_index"))}),e(s).bind("resize",function(i){return"function"==typeof t.options.onBeforeResize&&t.options.onBeforeResize.apply(t,[i]),t.resize(i)})},i.prototype.nextSlide=function(){var t,i;return i=this,t=this.numberOfSlides>this.currentSlide+1?this.currentSlide+1:0,this.goToSlide(t)},i.prototype.prevSlide=function(){var t,i;return i=this,t=this.currentSlide-1>=0?this.currentSlide-1:this.numberOfSlides-1,this.goToSlide(t)},i.prototype.goToSlide=function(t,i,s){var o,n,l;return null==i&&(i=!0),null==s&&(s=!0),l=this,i?null!=(o=this.iScroll)&&o.goToPage(t,0,this.options.speed):null!=(n=this.iScroll)&&n.goToPage(t,0,0),this.currentSlide=t,this.updateSlides(i),this.updateNavigation(),s&&e("body").trigger(this.$slider.data("index")+"#goToSlide",t-this.options.carousel),this.debug()},i.prototype.addCarouselSlides=function(){return this.$startElements=this.$slides.slice(-this.options.carousel).clone(),this.$endElements=this.$slides.slice(0,this.options.carousel).clone(),this.$slides.parent().prepend(this.$startElements),this.$slides.parent().append(this.$endElements)},i.prototype.startAutoScroll=function(){return this.interval=setInterval(this.nextSlide,this.options.interval)},i.prototype.stopAutoScroll=function(){return clearInterval(this.interval),this.interval=null},i.prototype.listenTo=function(t){var i;return i=this,e("body").on("slider_"+t+"#goToSlide",function(t,e){return i.stopAutoScroll(),i.goToSlide(e+i.options.carousel,!0,!1)})},i.prototype.debug=function(){var t;return this.options.debug?(this.$slider.find(".debug").remove(),this.$slider.append(this.debugTemplate({slider_index:this.$slider.data("index"),number_of_slides:this.numberOfSlides,current_slide:null!=(t=this.iScroll.currentPage)?t.pageX:void 0,autoscroll:this.interval?"enabled":"disabled",number_of_navigations:this.$sliderNavigation.length,slider_width:this.$slider.width()}))):void 0},i.prototype.get=function(t){return console.log("option: "+t+" is "+this.options[t]),this.options[t]},i.prototype.set=function(t,i){return this.options[t]=i,"autoscroll"!==t||this.interval||this.startAutoScroll(),"inactiveSlideOpacity"===t&&this.options.inactiveSlideOpacity&&this.setSlideOpacity(1,this.options.inactiveSlideOpacity),"navigation"===t&&this.renderNavigation(),"listenTo"===t&&this.listenTo(i),this.debug()},i}(),e.fn.extend({Slider:function(){var t,s;return s=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],this.each(function(i){var n,l;return n=e(this),l=n.data("Slider"),l||n.data("Slider",l=new o(this,s,i)),"string"==typeof s?l[s].apply(l,t):void 0})}})}(window.jQuery,window)}).call(this);