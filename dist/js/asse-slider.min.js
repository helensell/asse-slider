(function(){var t=function(t,i){return function(){return t.apply(i,arguments)}},i=[].slice;!function(e,s){var n;return n=function(){function i(i,s,n){null==n&&(n=null),this.debug=t(this.debug,this),this.stopAutoScroll=t(this.stopAutoScroll,this),this.startAutoScroll=t(this.startAutoScroll,this),this.goToSlide=t(this.goToSlide,this),this.prevSlide=t(this.prevSlide,this),this.nextSlide=t(this.nextSlide,this),this.resize=t(this.resize,this),this.onBeforeScrollStart=t(this.onBeforeScrollStart,this),this.onScrollEnd=t(this.onScrollEnd,this),this.options=e.extend({},this.defaults,s),this.$slider=e(i),this.$slider.data("index",n),this.$slider.addClass("slider_"+n),this.$sliderNavigation=[],this.$slideContainer=this.$slider.find(this.options.slideContainerSelector),this.$slides=this.$slideContainer.find(this.options.slideSelector),this.numberOfSlides=this.$slides.length,this.enableSlides(),this.iScroll=new IScroll(i,{scrollX:!0,scrollY:!1,snap:this.options.snap,snapSpeed:400,tap:!0,momentum:!1,eventPassthrough:!1,onBeforeScrollStart:function(t){var i,e,s;return i=t.touches[0],e=i.pageX,s=i.pageY,null},onBeforeScrollMove:function(t){var i,e;return i=Math.abs(point.pageX-pointStartX),e=Math.abs(point.pageY-pointStartY),i>=e?t.preventDefault():null}}),this.options.autoscroll&&this.startAutoScroll(),this.options.prevNextButtons&&this.addPrevNextButtons(),_.size(this.options.navigation)&&this.renderNavigation(),this.resize(),this.goToSlide(this.currentSlide),this.bindEvents(),this.debug()}return i.prototype.iScroll=null,i.prototype.numberOfSlides=null,i.prototype.currentSlide=0,i.prototype.interval=null,i.prototype.$slider=null,i.prototype.$slideContainer=null,i.prototype.$slides=null,i.prototype.$sliderNavigation=null,i.prototype.defaults={autoscroll:!0,speed:500,interval:5e3,debug:!0,snap:!0,navigation:["index"],indexNavigationTemplate:_.template('<ul class="sliderNavigation"> <% _.each(slides, function(element,index){ %> <li data-index="<%= index %>" class="slider_navigationItem fa fa-circle-o"></li> <% }); %> </ul>'),prevNextButtons:!0,prevNextButtonsTemplate:_.template('<span class="prev fa fa-angle-left"></span> <span class="next fa fa-angle-right"></span>'),slideContainerSelector:".slideContainer",slideSelector:"ul.slides > li",inactiveSlideOpacity:null,slideMargin:0,slideWidth:"auto",onSlideClick:function(t){return console.log("slide clicked")}},i.prototype.debugTemplate=_.template('<div class="debug"> <span>Slider: <%= slider_index %></span> <span># of slides: <%= number_of_slides %></span> <span>Current slide: <%= current_slide %></span> <span>Autoscroll: <%= autoscroll %></span> <span># of navigations: <%= number_of_navigations %></span> <span>Slider width: <%= slider_width %></span> </div>'),i.prototype.enableSlides=function(){return this.$slides.css({display:"block"})},i.prototype.addPrevNextButtons=function(){return this.$slider.append(this.options.prevNextButtonsTemplate())},i.prototype.renderNavigation=function(){var t;return t=this,_.each(this.options.navigation,function(i){return function(s,n,o){var r,l;return"index"===s?(l=i.options.indexNavigationTemplate({slides:i.$slides}),i.$sliderNavigation.push(e(l)),i.$slider.append(_.last(i.$sliderNavigation)),_.last(i.$sliderNavigation).css({"margin-left":-(_.last(i.$sliderNavigation).width()/2)})):s.data("Slider")?(i.$sliderNavigation.push(s),_.last(i.$sliderNavigation).Slider("onSlideClick",function(i){return t.stopAutoScroll(),t.goToSlide(e(i.currentTarget).index())})):s instanceof jQuery?(i.$sliderNavigation.push(s),r=_.last(i.$sliderNavigation).children(),i.$slides.each(function(s,n){var o;return o=r.eq(s),o?(o.data("slider_index",i.$slider.data("index")),o.data("item_index",s),o.addClass("slider_navigationItem"),o.on("click",function(i){return t.stopAutoScroll(),t.goToSlide(e(this).data("item_index"))})):void 0})):void 0}}(this)),this.updateNavigation()},i.prototype.updateNavigation=function(){var t;return t=this.currentSlide,_.each(this.$sliderNavigation,function(i){return i.data("Slider")?i.Slider("goToSlide",t):i instanceof jQuery?e(i).find(".slider_navigationItem").removeClass("active").eq(t).addClass("active"):void 0})},i.prototype.onSlideClick=function(t){return"function"==typeof t?this.options.onSlideClick=t:void 0},i.prototype.updateSlides=function(){return this.options.inactiveSlideOpacity&&(this.$slides.stop().animate({opacity:this.options.inactiveSlideOpacity}),this.$slides.eq(this.currentSlide).stop().animate({opacity:"1"})),this.$slides.removeClass("active"),this.$slides.eq(this.currentSlide).addClass("active")},i.prototype.onScrollEnd=function(){return this.currentSlide=this.iScroll.currentPage.pageX,this.updateSlides(),this.updateNavigation(),this.debug()},i.prototype.onBeforeScrollStart=function(){return this.stopAutoScroll()},i.prototype.resize=function(){return this.stopAutoScroll(),this.$slides.width("auto"===this.options.slideWidth?this.$slider.outerWidth():parseInt(this.options.slideWidth)+"px"),this.$slideContainer.width((this.$slides.outerWidth(!0)+2*this.options.slideMargin)*this.numberOfSlides),this.$slideContainer.height(this.$slider.height()),this.iScroll&&this.iScroll.refresh(),this.options.autoscroll?this.startAutoScroll():void 0},i.prototype.bindEvents=function(){var t;return t=this,this.iScroll.on("scrollEnd",this.onScrollEnd),this.iScroll.on("beforeScrollStart",this.onBeforeScrollStart),this.$slides.on("tap",function(i){return t.stopAutoScroll(),"function"==typeof t.options.onSlideClick?t.options.onSlideClick.apply(this,[i]):void 0}),this.$slider.on("click","span.next",function(){return t.stopAutoScroll(),t.nextSlide()}),this.$slider.on("click","span.prev",function(){return t.stopAutoScroll(),t.prevSlide()}),this.$slider.on("click","ul.sliderNavigation li",function(){return t.stopAutoScroll(),t.goToSlide(e(this).data("index"))}),e(s).bind("resize",function(){return t.resize()})},i.prototype.nextSlide=function(){var t,i;return i=this,t=this.numberOfSlides>this.currentSlide+1?this.currentSlide+1:0,this.goToSlide(t)},i.prototype.prevSlide=function(){var t,i;return i=this,t=this.currentSlide-1>=0?this.currentSlide-1:this.numberOfSlides-1,this.goToSlide(t)},i.prototype.goToSlide=function(t){var i;return this.currentSlide!==t&&(null!=(i=this.iScroll)&&i.goToPage(t,0,this.options.speed),this.currentSlide=t),this.updateSlides(),this.updateNavigation()},i.prototype.startAutoScroll=function(){return this.interval=setInterval(this.nextSlide,this.options.interval)},i.prototype.stopAutoScroll=function(){return clearInterval(this.interval),this.interval=null},i.prototype.debug=function(){var t;return this.options.debug?(this.$slider.find(".debug").remove(),this.$slider.append(this.debugTemplate({slider_index:this.$slider.data("index"),number_of_slides:this.numberOfSlides,current_slide:null!=(t=this.iScroll.currentPage)?t.pageX:void 0,autoscroll:this.interval?"enabled":"disabled",number_of_navigations:this.$sliderNavigation.length,slider_width:this.$slider.width()}))):void 0},i.prototype.get=function(t){return console.log("option: "+t+" is "+this.options[t]),this.options[t]},i.prototype.set=function(t,i){return console.log("setting "+t+" to "+i),this.options[t]=i,this.updateSettings()},i.prototype.updateSettings=function(){return this.options.autoscroll&&!this.interval&&this.startAutoScroll(),this.options.navigationElement&&this.renderNavigation(),this.debug()},i}(),e.fn.extend({Slider:function(){var t,s;return s=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],this.each(function(i){var o,r;return o=e(this),r=o.data("Slider"),r||o.data("Slider",r=new n(this,s,i)),"string"==typeof s?r[s].apply(r,t):void 0})}})}(window.jQuery,window)}).call(this);